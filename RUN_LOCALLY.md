# Running Locally - Model Submission Forum

## System Requirements

- **Node.js**: v18+ (recommended v20+)
- **npm** or **yarn** package manager
- **PostgreSQL database** (required)
- **Git** (for version control)

## Environment Setup

### 1. Database Configuration

Create or obtain a PostgreSQL database connection string and set up the `DATABASE_URL` environment variable.

**Option A: Local PostgreSQL**
```bash
DATABASE_URL="postgresql://user:password@localhost:5432/model_submission"
```

**Option B: Remote Database Service**
Use any PostgreSQL provider (Render, Railway, Neon, etc.)

### 2. Create `.env` File

In the project root directory, create a `.env` file:
```
DATABASE_URL=postgresql://user:password@localhost:5432/dbname
NODE_ENV=development
```

## Installation & Setup

### 1. Install Dependencies
```bash
npm install
```

### 2. Initialize Database
```bash
npm run db:push
```
This command pushes the database schema to your PostgreSQL instance.

### 3. Type Check (Optional)
```bash
npm run check
```
Verify all TypeScript files compile correctly.

## Development Commands

### Start Development Server
```bash
npm run dev
```
- Starts the Express server with hot-reload via tsx
- Client runs on Vite dev server
- Server listens for API requests
- Visit `http://localhost:5173` (or displayed URL)

### Build for Production
```bash
npm run build
```
- Bundles the React frontend with Vite
- Bundles the Express server with esbuild
- Output: `dist/` directory
- Creates optimized production build with minification

### Run Production Build
```bash
npm start
```
- Runs the production build: `NODE_ENV=production node dist/index.cjs`
- Requires `npm run build` to be run first

## Project Structure

```
├── client/                 # React frontend
│   ├── index.html
│   ├── src/
│   │   ├── components/     # UI components
│   │   ├── pages/          # Page components
│   │   ├── hooks/          # React hooks
│   │   ├── lib/            # Utilities
│   │   ├── App.tsx
│   │   └── main.tsx
│   └── public/
│
├── server/                 # Express backend
│   ├── index.ts           # Main server file
│   ├── routes.ts          # API routes
│   ├── static.ts          # Static file serving
│   └── storage.ts         # Storage utilities
│
├── shared/                # Shared code
│   └── schema.ts          # Zod schemas & types
│
├── script/                # Build scripts
│   └── build.ts
│
├── migrations/            # Database migrations (auto-generated)
│
└── Configuration Files
    ├── vite.config.ts     # Vite configuration
    ├── tsconfig.json      # TypeScript configuration
    ├── tailwind.config.ts # Tailwind CSS configuration
    ├── drizzle.config.ts  # Database ORM configuration
    ├── postcss.config.js  # PostCSS configuration
    └── package.json       # Dependencies & scripts
```

## Key Technologies

### Frontend
- React 18
- TypeScript
- Vite (bundler)
- TailwindCSS (styling)
- React Hook Form (form management)
- Zod (validation)
- @radix-ui (component library)
- @tanstack/react-query (data fetching)
- Lucide React (icons)
- jsPDF (PDF generation)

### Backend
- Express.js
- TypeScript
- PostgreSQL
- Drizzle ORM
- Multer (file uploads)
- Express Session

### Build Tools
- Vite
- esbuild
- TypeScript
- Drizzle Kit

## Database Migrations

When you modify the database schema in `shared/schema.ts`, run:
```bash
npm run db:push
```

Migrations are stored in the `migrations/` directory and are auto-generated by Drizzle Kit.

## Port Information

- **Frontend (Vite Dev Server)**: http://localhost:5173 (default)
- **Backend (Express)**: http://localhost:3000 (or configured port)

## Troubleshooting

### Database Connection Error
- Verify `DATABASE_URL` is correct and PostgreSQL is running
- Check database credentials
- Ensure PostgreSQL is accessible on the specified host/port

### Port Already in Use
- Kill existing process: `lsof -ti:3000 | xargs kill -9`
- Or configure a different port in server settings

### Missing Dependencies
- Run `npm install` again
- Clear node_modules: `rm -rf node_modules && npm install`

### Build Errors
- Run `npm run check` to identify TypeScript errors
- Clear Vite cache: `rm -rf client/.vite`

## Scripts Summary

| Command | Purpose |
|---------|---------|
| `npm install` | Install dependencies |
| `npm run dev` | Start development server |
| `npm run build` | Build for production |
| `npm start` | Run production build |
| `npm run check` | Type-check TypeScript |
| `npm run db:push` | Push database schema |

## Additional Notes

- The application uses Passport for authentication capabilities
- PDF generation is handled by jsPDF with autotable plugin
- File uploads are managed by Multer
- Session management uses connect-pg-simple (PostgreSQL-backed sessions)
- UI components use Radix UI primitives for accessibility
